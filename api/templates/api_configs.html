<!-- API Configuration Interface -->
    <div class="flex h-full w-full relative">
        <!-- Sidebar Navigation -->
        <div class="fixed left-0 top-0 z-50 flex-shrink-0 w-64 md:w-64 w-16 h-full theme-bg-surface theme-border border-r">
            <div class="p-4 pt-4">
                <h3 class="text-lg font-semibold theme-text-primary mb-4 hidden md:block">Documents API</h3>
                <nav class="space-y-2" aria-label="Sidebar Navigation">
                    <button id="configs-tab" class="sidebar-nav-item active w-full flex items-center md:px-3 px-2 py-2 rounded-lg text-sm font-medium transition-colors duration-200" title="APIs">
                        <i data-lucide="settings" class="h-4 w-4 md:mr-3 mr-0 mx-auto md:mx-0"></i>
                        <span class="hidden md:inline">APIs</span>
                    </button>
                    <button id="policies-tab" class="sidebar-nav-item w-full flex items-center md:px-3 px-2 py-2 rounded-lg text-sm font-medium transition-colors duration-200" title="Policies">
                        <i data-lucide="shield" class="h-4 w-4 md:mr-3 mr-0 mx-auto md:mx-0"></i>
                        <span class="hidden md:inline">Policies</span>
                    </button>
                    <button id="usage-tab" class="sidebar-nav-item w-full flex items-center md:px-3 px-2 py-2 rounded-lg text-sm font-medium transition-colors duration-200" title="Usage">
                        <i data-lucide="activity" class="h-4 w-4 md:mr-3 mr-0 mx-auto md:mx-0"></i>
                        <span class="hidden md:inline">Usage</span>
                    </button>
                    <button id="triage-tab" class="sidebar-nav-item w-full flex items-center md:px-3 px-2 py-2 rounded-lg text-sm font-medium transition-colors duration-200" title="Triage">
                        <i data-lucide="inbox" class="h-4 w-4 md:mr-3 mr-0 mx-auto md:mx-0"></i>
                        <span class="hidden md:inline">Triage</span>
                        <span id="triage-pending-badge" class="ml-auto hidden px-2 py-0.5 text-xs rounded-full theme-bg-danger text-white">0</span>
                    </button>
                </nav>
            </div>
        </div>

        <!-- Content Area -->
        <div class="flex-1 overflow-y-auto theme-bg-background md:ml-64 ml-16">
            <div class="p-6">

                <!-- Configurations Section -->
                <div id="configs-section" class="tab-content">
                    <div class="mb-6">
                        <h2 class="text-2xl font-bold theme-text-primary">Documents API</h2>
                        <p class="theme-text-secondary mt-1">Manage your API configurations and access settings</p>
                    </div>

                    <!-- Actions Bar -->
                    <div class="mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                        <!-- Search Bar -->
                        <div class="relative max-w-md flex-1">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i data-lucide="search" class="h-5 w-5 theme-text-muted"></i>
                            </div>
                            <input type="text" id="config-search" class="uk-input pl-10 pr-4 py-3 w-full rounded-lg theme-border border theme-bg-surface focus:ring-2 focus:ring-blue-500 focus:border-blue-500" style="color: var(--color-text-primary);" placeholder="Search configurations...">
                        </div>

                        <!-- Create Button -->
                        <div class="flex items-center space-x-3">
                            <button id="create-config-btn" class="bg-transparent hover:theme-bg-surface theme-text-secondary hover:theme-text-primary px-3 py-2 rounded-lg flex items-center space-x-2 font-medium transition-all duration-200 border theme-border hover:theme-text-primary">
                                <i data-lucide="plus" class="h-4 w-4"></i>
                                <span>Documents API</span>
                            </button>
                            <button id="refresh-configs-btn" class="p-2.5 rounded-lg theme-text-muted hover:theme-text-primary hover:theme-bg-surface transition-all duration-200">
                                <i data-lucide="refresh-cw" class="h-4 w-4"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Skeleton Loading State -->
                    <div id="configs-loading" class="space-y-4 hidden">
                        <!-- API Config Skeleton Items -->
                        <div class="theme-bg-surface rounded-xl shadow-sm theme-border border animate-pulse">
                            <div class="p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex-1">
                                        <div class="h-6 theme-border rounded w-48 mb-2"></div>
                                        <div class="h-4 theme-border rounded w-32"></div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <div class="h-8 w-8 theme-border rounded"></div>
                                        <div class="h-8 w-8 theme-border rounded"></div>
                                        <div class="h-8 w-8 theme-border rounded"></div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-6">
                                    <div class="space-y-2">
                                        <div class="h-4 theme-border rounded w-20"></div>
                                        <div class="space-y-1">
                                            <div class="h-6 theme-border rounded w-24"></div>
                                            <div class="h-6 theme-border rounded w-28"></div>
                                        </div>
                                    </div>
                                    <div class="space-y-2">
                                        <div class="h-4 theme-border rounded w-24"></div>
                                        <div class="space-y-1">
                                            <div class="h-6 theme-border rounded w-32"></div>
                                            <div class="h-6 theme-border rounded w-28"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center mt-4">
                                    <div class="h-4 theme-border rounded w-32"></div>
                                    <div class="h-4 theme-border rounded w-16"></div>
                                </div>
                            </div>
                        </div>
                        <!-- Repeat skeleton for 3 items -->
                        <div class="theme-bg-surface rounded-xl shadow-sm theme-border border animate-pulse">
                            <div class="p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex-1">
                                        <div class="h-6 theme-border rounded w-48 mb-2"></div>
                                        <div class="h-4 theme-border rounded w-32"></div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <div class="h-8 w-8 theme-border rounded"></div>
                                        <div class="h-8 w-8 theme-border rounded"></div>
                                        <div class="h-8 w-8 theme-border rounded"></div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-6">
                                    <div class="space-y-2">
                                        <div class="h-4 theme-border rounded w-20"></div>
                                        <div class="space-y-1">
                                            <div class="h-6 theme-border rounded w-24"></div>
                                            <div class="h-6 theme-border rounded w-28"></div>
                                        </div>
                                    </div>
                                    <div class="space-y-2">
                                        <div class="h-4 theme-border rounded w-24"></div>
                                        <div class="space-y-1">
                                            <div class="h-6 theme-border rounded w-32"></div>
                                            <div class="h-6 theme-border rounded w-28"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center mt-4">
                                    <div class="h-4 theme-border rounded w-32"></div>
                                    <div class="h-4 theme-border rounded w-16"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Configurations List -->
                    <div class="space-y-4" id="configs-list">
                        <!-- Configurations will be populated dynamically -->
                    </div>

                    <!-- Empty State -->
                    <div id="configs-empty" class="text-center py-12 hidden">
                        <i data-lucide="settings" class="h-12 w-12 theme-text-muted mx-auto mb-4"></i>
                        <h3 class="text-lg font-medium theme-text-primary mb-2">No API configurations found</h3>
                        <p class="theme-text-secondary mb-4">Create your first API configuration to get started</p>
                        <button id="empty-create-btn" class="bg-transparent hover:theme-bg-surface theme-text-secondary hover:theme-text-primary px-3 py-2 rounded-lg flex items-center space-x-2 font-medium transition-all duration-200 border theme-border hover:theme-text-primary mx-auto">
                            <i data-lucide="plus" class="h-4 w-4"></i>
                            <span>Documents API</span>
                        </button>
                    </div>

                    <!-- Error State -->
                    <div id="configs-error" class="text-center py-12 hidden">
                        <i data-lucide="alert-circle" class="h-12 w-12 theme-text-danger mx-auto mb-4"></i>
                        <h3 class="text-lg font-medium theme-text-primary mb-2">Error loading configurations</h3>
                        <p class="theme-text-secondary mb-4" id="configs-error-message">An error occurred while loading API configurations</p>
                        <button id="retry-configs-btn" class="theme-bg-primary hover:opacity-90 text-white px-4 py-2.5 rounded-lg font-medium transition-all duration-200">Try Again</button>
                    </div>
                </div>

                <!-- Policies Section -->
                <div id="policies-section" class="tab-content hidden">
                    <div class="mb-6">
                        <h2 class="text-2xl font-bold theme-text-primary">Usage Policies</h2>
                        <p class="theme-text-secondary mt-1">Manage API usage policies and enforcement rules</p>
                    </div>

                    <!-- Actions Bar -->
                    <div class="mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                        <!-- Search Bar -->
                        <div class="relative max-w-md flex-1">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i data-lucide="search" class="h-5 w-5 theme-text-muted"></i>
                            </div>
                            <input type="text" id="policy-search" class="uk-input pl-10 pr-4 py-3 w-full rounded-lg theme-border border theme-bg-surface focus:ring-2 focus:ring-blue-500 focus:border-blue-500" style="color: var(--color-text-primary);" placeholder="Search policies...">
                        </div>

                        <!-- Create Button -->
                        <div class="flex items-center space-x-3">
                            <button id="create-policy-btn" class="bg-transparent hover:theme-bg-surface theme-text-secondary hover:theme-text-primary px-3 py-2 rounded-lg flex items-center space-x-2 font-medium transition-all duration-200 border theme-border hover:theme-text-primary">
                                <i data-lucide="plus" class="h-4 w-4"></i>
                                <span>Create Policy</span>
                            </button>
                            <button id="refresh-policies-btn" class="p-2.5 rounded-lg theme-text-muted hover:theme-text-primary hover:theme-bg-surface transition-all duration-200">
                                <i data-lucide="refresh-cw" class="h-4 w-4"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Skeleton Loading State -->
                    <div id="policies-loading" class="space-y-4 hidden">
                        <!-- Policy Skeleton Items -->
                        <div class="theme-bg-surface rounded-xl shadow-sm theme-border border animate-pulse">
                            <div class="p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex-1">
                                        <div class="h-6 theme-border rounded w-48 mb-2"></div>
                                        <div class="h-4 theme-border rounded w-32"></div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <div class="h-8 w-8 theme-border rounded"></div>
                                        <div class="h-8 w-8 theme-border rounded"></div>
                                        <div class="h-8 w-8 theme-border rounded"></div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-6">
                                    <div class="space-y-2">
                                        <div class="h-4 theme-border rounded w-20"></div>
                                        <div class="space-y-1">
                                            <div class="h-6 theme-border rounded w-24"></div>
                                            <div class="h-6 theme-border rounded w-28"></div>
                                        </div>
                                    </div>
                                    <div class="space-y-2">
                                        <div class="h-4 theme-border rounded w-24"></div>
                                        <div class="space-y-1">
                                            <div class="h-6 theme-border rounded w-32"></div>
                                            <div class="h-6 theme-border rounded w-28"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center mt-4">
                                    <div class="h-4 theme-border rounded w-32"></div>
                                    <div class="h-4 theme-border rounded w-16"></div>
                                </div>
                            </div>
                        </div>
                        <!-- Repeat skeleton for 3 items -->
                        <div class="theme-bg-surface rounded-xl shadow-sm theme-border border animate-pulse">
                            <div class="p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex-1">
                                        <div class="h-6 theme-border rounded w-48 mb-2"></div>
                                        <div class="h-4 theme-border rounded w-32"></div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <div class="h-8 w-8 theme-border rounded"></div>
                                        <div class="h-8 w-8 theme-border rounded"></div>
                                        <div class="h-8 w-8 theme-border rounded"></div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-2 gap-6">
                                    <div class="space-y-2">
                                        <div class="h-4 theme-border rounded w-20"></div>
                                        <div class="space-y-1">
                                            <div class="h-6 theme-border rounded w-24"></div>
                                            <div class="h-6 theme-border rounded w-28"></div>
                                        </div>
                                    </div>
                                    <div class="space-y-2">
                                        <div class="h-4 theme-border rounded w-24"></div>
                                        <div class="space-y-1">
                                            <div class="h-6 theme-border rounded w-32"></div>
                                            <div class="h-6 theme-border rounded w-28"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center mt-4">
                                    <div class="h-4 theme-border rounded w-32"></div>
                                    <div class="h-4 theme-border rounded w-16"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Policies List -->
                    <div class="space-y-4" id="policies-list">
                        <!-- Policies will be populated dynamically -->
                    </div>

                    <!-- Empty State -->
                    <div id="policies-empty" class="text-center py-12 hidden">
                        <i data-lucide="shield" class="h-12 w-12 theme-text-muted mx-auto mb-4"></i>
                        <h3 class="text-lg font-medium theme-text-primary mb-2">No policies found</h3>
                        <p class="theme-text-secondary mb-4">Create your first usage policy to control API access</p>
                        <button id="empty-create-policy-btn" class="bg-transparent hover:theme-bg-surface theme-text-secondary hover:theme-text-primary px-3 py-2 rounded-lg flex items-center space-x-2 font-medium transition-all duration-200 border theme-border hover:theme-text-primary mx-auto">
                            <i data-lucide="plus" class="h-4 w-4"></i>
                            <span>Create Policy</span>
                        </button>
                    </div>

                    <!-- Error State -->
                    <div id="policies-error" class="text-center py-12 hidden">
                        <i data-lucide="alert-circle" class="h-12 w-12 theme-text-danger mx-auto mb-4"></i>
                        <h3 class="text-lg font-medium theme-text-primary mb-2">Error loading policies</h3>
                        <p class="theme-text-secondary mb-4" id="policies-error-message">An error occurred while loading policies</p>
                        <button id="retry-policies-btn" class="theme-bg-primary hover:opacity-90 text-white px-4 py-2.5 rounded-lg font-medium transition-all duration-200">Try Again</button>
                    </div>
                </div>

                <!-- Usage Section -->
                <div id="usage-section" class="tab-content hidden">
                    <div class="mb-6">
                        <h2 class="text-2xl font-bold theme-text-primary">API Usage</h2>
                        <p class="theme-text-secondary mt-1">Monitor API usage metrics and statistics</p>
                    </div>

                    <!-- Usage Metrics Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <!-- Total Requests -->
                        <div class="theme-bg-surface rounded-xl p-6 shadow-sm theme-border border">
                            <div class="flex items-center">
                                <div class="p-2 rounded-lg" style="background-color: rgba(var(--color-primary-rgb, 30, 136, 229), 0.1);">
                                    <i data-lucide="activity" class="h-6 w-6 theme-primary"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium theme-text-secondary">Total Requests</p>
                                    <p class="text-2xl font-bold theme-text-primary" id="total-requests">0</p>
                                </div>
                            </div>
                        </div>

                        <!-- Input Word Count -->
                        <div class="theme-bg-surface rounded-xl p-6 shadow-sm theme-border border">
                            <div class="flex items-center">
                                <div class="p-2 rounded-lg" style="background-color: rgba(var(--color-success-rgb, 40, 167, 69), 0.1);">
                                    <i data-lucide="download" class="h-6 w-6 theme-success"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium theme-text-secondary">Input Words</p>
                                    <p class="text-2xl font-bold theme-text-primary" id="total-input">0</p>
                                </div>
                            </div>
                        </div>

                        <!-- Output Word Count -->
                        <div class="theme-bg-surface rounded-xl p-6 shadow-sm theme-border border">
                            <div class="flex items-center">
                                <div class="p-2 rounded-lg" style="background-color: rgba(var(--color-info-rgb, 23, 162, 184), 0.1);">
                                    <i data-lucide="upload" class="h-6 w-6 theme-info"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium theme-text-secondary">Output Words</p>
                                    <p class="text-2xl font-bold theme-text-primary" id="total-output">0</p>
                                </div>
                            </div>
                        </div>

                        <!-- Active Configs -->
                        <div class="theme-bg-surface rounded-xl p-6 shadow-sm theme-border border">
                            <div class="flex items-center">
                                <div class="p-2 rounded-lg" style="background-color: rgba(var(--color-warning-rgb, 255, 193, 7), 0.1);">
                                    <i data-lucide="settings" class="h-6 w-6 theme-warning"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium theme-text-secondary">Active Configs</p>
                                    <p class="text-2xl font-bold theme-text-primary" id="active-configs">0</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Usage Details -->
                    <div class="theme-bg-surface rounded-xl p-6 shadow-sm theme-border border">
                        <h3 class="text-lg font-semibold theme-text-primary mb-4">Usage by Configuration</h3>
                        <div id="usage-details">
                            <!-- Usage details will be populated dynamically -->
                        </div>
                    </div>
                </div>

                <!-- Triage Section -->
                <div id="triage-section" class="tab-content hidden">
                    <div class="mb-6">
                        <h2 class="text-2xl font-bold theme-text-primary">Response Triage</h2>
                        <p class="theme-text-secondary mt-1">Review and approve responses that require manual verification</p>
                    </div>

                    <!-- Actions Bar -->
                    <div class="mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                        <!-- Filter Tabs -->
                        <div class="flex items-center space-x-2">
                            <button id="triage-filter-pending" class="triage-filter-btn active px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200">
                                Pending
                                <span id="triage-pending-count" class="ml-2 px-2 py-0.5 text-xs rounded-full theme-bg-warning text-white">0</span>
                            </button>
                            <button id="triage-filter-approved" class="triage-filter-btn px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200">
                                Approved
                            </button>
                            <button id="triage-filter-rejected" class="triage-filter-btn px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200">
                                Rejected
                            </button>
                        </div>

                        <!-- Actions -->
                        <div class="flex items-center space-x-3">
                            <button id="refresh-triage-btn" class="p-2.5 rounded-lg theme-text-muted hover:theme-text-primary hover:theme-bg-surface transition-all duration-200">
                                <i data-lucide="refresh-cw" class="h-4 w-4"></i>
                            </button>
                            <button id="cleanup-triage-btn" class="px-3 py-2 rounded-lg text-sm font-medium theme-text-secondary hover:theme-text-primary hover:theme-bg-surface transition-all duration-200 border theme-border">
                                <i data-lucide="trash-2" class="h-4 w-4 mr-2 inline"></i>
                                Cleanup Old
                            </button>
                        </div>
                    </div>

                    <!-- Skeleton Loading State -->
                    <div id="triage-loading" class="space-y-4 hidden">
                        <!-- Triage Skeleton Items -->
                        <div class="theme-bg-surface rounded-xl shadow-sm theme-border border animate-pulse">
                            <div class="p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex-1">
                                        <div class="h-6 theme-border rounded w-48 mb-2"></div>
                                        <div class="h-4 theme-border rounded w-32"></div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <div class="h-8 w-24 theme-border rounded"></div>
                                        <div class="h-8 w-24 theme-border rounded"></div>
                                    </div>
                                </div>
                                <div class="space-y-2">
                                    <div class="h-4 theme-border rounded w-full"></div>
                                    <div class="h-4 theme-border rounded w-3/4"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Triage List -->
                    <div class="space-y-4" id="triage-list">
                        <!-- Triage items will be populated dynamically -->
                    </div>

                    <!-- Empty State -->
                    <div id="triage-empty" class="text-center py-12 hidden">
                        <i data-lucide="inbox" class="h-12 w-12 theme-text-muted mx-auto mb-4"></i>
                        <h3 class="text-lg font-medium theme-text-primary mb-2">No triage requests</h3>
                        <p class="theme-text-secondary mb-4">There are no responses awaiting review</p>
                    </div>

                    <!-- Error State -->
                    <div id="triage-error" class="text-center py-12 hidden">
                        <i data-lucide="alert-circle" class="h-12 w-12 theme-text-danger mx-auto mb-4"></i>
                        <h3 class="text-lg font-medium theme-text-primary mb-2">Error loading triage requests</h3>
                        <p class="theme-text-secondary mb-4" id="triage-error-message">An error occurred while loading triage requests</p>
                        <button id="retry-triage-btn" class="theme-bg-primary hover:opacity-90 text-white px-4 py-2.5 rounded-lg font-medium transition-all duration-200">Try Again</button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Create/Edit Configuration Modal -->
    <div id="config-modal" class="uk-modal">
        <div class="uk-modal-dialog uk-modal-body theme-bg-surface rounded-lg" style="max-width: 600px;">
            <button class="uk-modal-close-default" type="button" uk-close></button>
            <h2 class="uk-modal-title theme-text-primary mb-6" id="modal-title">Create API Configuration</h2>

            <form id="config-form" class="space-y-6">
                <input type="hidden" id="config-id" value="">

                <!-- Users Section -->
                <div class="uk-form-row">
                    <label class="uk-form-label theme-text-primary font-medium mb-3">Authorized Users</label>
                    <div class="uk-form-controls">
                        <div class="user-input-container relative">
                            <input
                                type="text"
                                id="users-autocomplete-input"
                                class="uk-input w-full border theme-border theme-bg-surface rounded-lg p-3"
                                placeholder="Type to search users..."
                                autocomplete="off"
                            >
                            <div id="users-autocomplete-popup" class="autocomplete-popup hidden absolute z-50 w-full theme-bg-surface border theme-border rounded-lg shadow-lg mt-1 max-h-48 overflow-y-auto">
                                <!-- User suggestions will be populated here -->
                            </div>
                        </div>
                        <!-- Selected Users Display -->
                        <div id="selected-users-container" class="selected-users hidden mt-3">
                            <div class="theme-bg-background rounded-xl p-4">
                                <div class="flex items-center justify-between mb-3">
                                    <h4 class="text-sm font-medium theme-text-primary">Selected Users</h4>
                                    <button type="button" onclick="clearAllUsers()" class="clear-all-users-btn text-xs px-3 py-1.5 theme-danger rounded-lg transition-all duration-200" style="background-color: rgba(var(--color-danger-rgb, 220, 53, 69), 0.1); --tw-bg-opacity: 1;">Clear All</button>
                                </div>
                                <div id="selected-users-list" class="space-y-2 max-h-48 overflow-y-auto users-list">
                                    <!-- Selected users will be displayed here -->
                                </div>
                                <div class="mt-3 pt-3 theme-border border-t">
                                    <span class="text-sm theme-text-secondary users-summary">0 users selected</span>
                                </div>
                            </div>
                        </div>
                        <input type="hidden" id="config-users" required>
                        <div class="uk-form-help theme-text-secondary mt-2">Search and select users for this API config. Selected users will appear below.</div>
                    </div>
                </div>

                <!-- Datasets Section -->
                <div class="uk-form-row">
                    <label class="uk-form-label theme-text-primary font-medium mb-3">Authorized Datasets</label>
                    <div class="uk-form-controls">
                        <div class="dataset-input-container relative">
                            <input
                                type="text"
                                id="datasets-autocomplete-input"
                                class="uk-input w-full border theme-border theme-bg-surface rounded-lg p-3"
                                placeholder="Type to search documents..."
                                autocomplete="off"
                            >
                            <div id="datasets-autocomplete-popup" class="autocomplete-popup hidden absolute z-50 w-full theme-bg-surface border theme-border rounded-lg shadow-lg mt-1 max-h-48 overflow-y-auto">
                                <!-- Dataset suggestions will be populated here -->
                            </div>
                        </div>
                        <!-- Selected Datasets Display -->
                        <div id="selected-datasets-container" class="selected-datasets hidden mt-3">
                            <div class="theme-bg-background rounded-xl p-4">
                                <div class="flex items-center justify-between mb-3">
                                    <h4 class="text-sm font-medium theme-text-primary">Selected Datasets</h4>
                                    <button type="button" onclick="clearAllDatasets()" class="clear-all-datasets-btn text-xs px-3 py-1.5 theme-danger rounded-lg transition-all duration-200" style="background-color: rgba(var(--color-danger-rgb, 220, 53, 69), 0.1); --tw-bg-opacity: 1;">Clear All</button>
                                </div>
                                <div id="selected-datasets-list" class="space-y-2 max-h-48 overflow-y-auto datasets-list">
                                    <!-- Selected datasets will be displayed here -->
                                </div>
                                <div class="mt-3 pt-3 theme-border border-t">
                                    <span class="text-sm theme-text-secondary datasets-summary">0 datasets selected</span>
                                </div>
                            </div>
                        </div>
                        <input type="hidden" id="config-datasets" required>
                        <div class="uk-form-help theme-text-secondary mt-2">Search and select documents for this API config. Selected documents will appear below.</div>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="uk-modal-footer pt-6 border-t theme-border bg-theme-surface flex justify-end items-center gap-3">
                    <button type="button" class="px-4 py-2.5 rounded-lg border theme-border theme-text-secondary hover:theme-text-primary hover:theme-bg-surface transition-all duration-200 uk-modal-close">Cancel</button>
                    <button type="submit" id="config-submit-btn" class="theme-bg-primary hover:opacity-90 text-white px-4 py-2.5 rounded-lg font-medium transition-all duration-200">
                        <span id="config-btn-text">Create Configuration</span>
                        <i id="config-spinner" class="hidden uk-spinner uk-spinner-small ml-2"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- API Config Statistics Modal - Revamped -->
    <div id="usage-stats-modal" class="usage-stats-modal">
        <div class="usage-stats-dialog">
            <!-- Modal Header -->
            <div class="usage-stats-header">
                <div>
                    <div class="usage-stats-title">
                        <div class="usage-stats-title-icon">
                            <i data-lucide="bar-chart-2"></i>
                        </div>
                        <span>API Usage Analytics</span>
                    </div>
                    <div class="usage-stats-subtitle" id="stats-config-name">Loading...</div>
                </div>
                <button class="usage-stats-close" onclick="closeUsageStatsModal()">
                    <i data-lucide="x"></i>
                </button>
            </div>


            <!-- Modal Body -->
            <div class="usage-stats-body" id="usage-stats-content">
                <!-- Loading State -->
                <div class="usage-stats-loading">
                    <div class="loading-spinner"></div>
                    <p class="loading-text">Loading usage analytics...</p>
                </div>
            </div>

            <!-- Modal Footer -->
            <div class="usage-stats-footer">
                <span class="last-updated" id="stats-last-updated">Last updated: Never</span>
                <div class="footer-actions">
                    <button class="refresh-btn" onclick="refreshUsageStats()">
                        <i data-lucide="refresh-cw" style="width: 16px; height: 16px;"></i>
                        Refresh
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create/Edit Policy Modal -->
    <div id="policy-modal" class="uk-modal">
        <div class="uk-modal-dialog uk-modal-body theme-bg-surface rounded-lg" style="max-width: 1200px; width: 90%; padding: 0;">
            <button class="uk-modal-close-default" type="button" uk-close style="top: 20px; right: 20px; z-index: 1000;"></button>

            <form id="policy-form">
                <input type="hidden" id="policy-id" value="">

                <div class="flex h-full" style="min-height: 600px;">
                    <!-- Sidebar Tabs -->
                    <div class="w-56 theme-bg-background theme-border border-r p-4">
                        <h2 class="text-lg font-bold theme-text-primary mb-6" id="policy-modal-title">Create Policy</h2>

                        <nav class="space-y-2" id="policy-tab-nav">
                            <button type="button" class="policy-tab-btn active w-full flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200" data-tab="general">
                                <i data-lucide="settings" class="h-4 w-4 mr-3"></i>
                                <span>General</span>
                            </button>
                            <button type="button" class="policy-tab-btn w-full flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200" data-tab="rules">
                                <i data-lucide="shield" class="h-4 w-4 mr-3"></i>
                                <span>Rules</span>
                                <span id="rules-count-badge" class="ml-auto hidden px-2 py-0.5 text-xs rounded-full theme-bg-primary text-white">0</span>
                            </button>
                        </nav>
                    </div>

                    <!-- Content Area -->
                    <div class="flex-1 p-6">
                        <!-- General Settings Tab -->
                        <div id="policy-tab-general" class="policy-tab-content">
                            <h3 class="text-lg font-semibold theme-text-primary mb-6">General Settings</h3>

                            <div class="space-y-6">
                                <!-- Policy Name -->
                                <div>
                                    <label class="block text-sm font-medium theme-text-primary mb-2">
                                        Policy Name <span class="text-red-500">*</span>
                                    </label>
                                    <input
                                        type="text"
                                        id="policy-name"
                                        class="w-full px-4 py-3 border theme-border theme-bg-surface rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                                        placeholder="e.g., Free Tier, Standard Plan, Enterprise"
                                        required
                                    >
                                    <p class="mt-2 text-sm theme-text-secondary">Give your policy a descriptive name that clearly identifies its purpose</p>
                                </div>

                                <!-- Policy Description -->
                                <div>
                                    <label class="block text-sm font-medium theme-text-primary mb-2">
                                        Description
                                    </label>
                                    <textarea
                                        id="policy-description"
                                        class="w-full px-4 py-3 border theme-border theme-bg-surface rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"
                                        rows="4"
                                        placeholder="Describe the policy's purpose, target users, and key limitations..."
                                    ></textarea>
                                    <p class="mt-2 text-sm theme-text-secondary">Optional: Add details about who this policy is for and what it allows</p>
                                </div>

                                <!-- Enforcement Mode -->
                                <div>
                                    <label class="block text-sm font-medium theme-text-primary mb-2">
                                        Enforcement Mode
                                    </label>
                                    <div class="space-y-3">
                                        <label class="flex items-start p-4 border theme-border rounded-lg cursor-pointer hover:theme-bg-background transition-all">
                                            <input type="radio" name="enforcement-mode" value="block" checked class="mt-1 mr-3">
                                            <div class="flex-1">
                                                <div class="font-medium theme-text-primary">Block Mode</div>
                                                <div class="text-sm theme-text-secondary mt-1">Deny requests that exceed defined limits</div>
                                            </div>
                                        </label>
                                        <label class="flex items-start p-4 border theme-border rounded-lg cursor-pointer hover:theme-bg-background transition-all">
                                            <input type="radio" name="enforcement-mode" value="log" class="mt-1 mr-3">
                                            <div class="flex-1">
                                                <div class="font-medium theme-text-primary">Log Only Mode</div>
                                                <div class="text-sm theme-text-secondary mt-1">Track violations for monitoring without blocking requests</div>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Rules Tab -->
                        <div id="policy-tab-rules" class="policy-tab-content hidden">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-lg font-semibold theme-text-primary">Usage Rules</h3>
                                <button type="button" id="add-rule-btn" class="px-3 py-2 text-sm font-medium theme-bg-primary text-white rounded-lg hover:opacity-90 transition-all duration-200 flex items-center gap-2">
                                    <i data-lucide="plus" class="h-4 w-4"></i>
                                    Add Rule
                                </button>
                            </div>

                            <!-- Rule Templates -->
                            <div id="rule-templates" class="mb-6 p-4 theme-bg-background rounded-lg">
                                <p class="text-sm font-medium theme-text-primary mb-3">Quick Templates:</p>
                                <div class="grid grid-cols-2 gap-2">
                                    <button type="button" class="rule-template-btn px-4 py-2 text-sm font-medium theme-bg-surface theme-border border rounded-lg hover:theme-bg-primary hover:text-white hover:border-primary transition-all text-left"
                                            data-metric="requests_count" data-operator="less_than" data-threshold="1000" data-period="daily">
                                        <div class="font-semibold">Free Tier</div>
                                        <div class="text-xs opacity-75">1000 requests/day</div>
                                    </button>
                                    <button type="button" class="rule-template-btn px-4 py-2 text-sm font-medium theme-bg-surface theme-border border rounded-lg hover:theme-bg-primary hover:text-white hover:border-primary transition-all text-left"
                                            data-metric="requests_count" data-operator="less_than" data-threshold="100" data-period="hourly">
                                        <div class="font-semibold">Rate Limited</div>
                                        <div class="text-xs opacity-75">100 requests/hour</div>
                                    </button>
                                    <button type="button" class="rule-template-btn px-4 py-2 text-sm font-medium theme-bg-surface theme-border border rounded-lg hover:theme-bg-primary hover:text-white hover:border-primary transition-all text-left"
                                            data-metric="total_words_count" data-operator="less_than" data-threshold="50000" data-period="monthly">
                                        <div class="font-semibold">Standard Plan</div>
                                        <div class="text-xs opacity-75">50K words/month</div>
                                    </button>
                                    <button type="button" class="rule-template-btn px-4 py-2 text-sm font-medium theme-bg-surface theme-border border rounded-lg hover:theme-bg-primary hover:text-white hover:border-primary transition-all text-left"
                                            data-metric="credits_used" data-operator="less_than" data-threshold="100" data-period="monthly">
                                        <div class="font-semibold">Credit Based</div>
                                        <div class="text-xs opacity-75">100 credits/month</div>
                                    </button>
                                </div>
                            </div>

                            <!-- Rules Container -->
                            <div id="policy-rules-container" class="space-y-4">
                                <!-- Rules will be added dynamically -->
                            </div>

                            <!-- Empty State -->
                            <div id="rules-empty-state" class="text-center py-12">
                                <i data-lucide="shield-off" class="h-12 w-12 theme-text-muted mx-auto mb-4"></i>
                                <p class="theme-text-secondary mb-4">No rules defined yet</p>
                                <p class="text-sm theme-text-secondary">Add rules to control API usage limits</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal Footer -->
                <div class="px-6 py-4 border-t theme-border theme-bg-background flex justify-between items-center">
                    <div id="policy-validation-message" class="text-sm theme-text-secondary"></div>
                    <div class="flex gap-3">
                        <button type="button" class="px-4 py-2.5 rounded-lg border theme-border theme-text-secondary hover:theme-text-primary hover:theme-bg-surface transition-all duration-200 uk-modal-close">Cancel</button>
                        <button type="submit" id="policy-submit-btn" class="theme-bg-primary hover:opacity-90 text-white px-4 py-2.5 rounded-lg font-medium transition-all duration-200 flex items-center gap-2" disabled>
                            <span id="policy-btn-text">Create Policy</span>
                            <i id="policy-spinner" class="hidden uk-spinner uk-spinner-small"></i>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Policy Statistics Modal -->
    <div id="policy-stats-modal" class="uk-modal">
        <div class="uk-modal-dialog uk-modal-body theme-bg-surface rounded-lg" style="max-width: 800px;">
            <button class="uk-modal-close-default" type="button" uk-close></button>
            <h2 class="uk-modal-title theme-text-primary mb-6" id="policy-stats-modal-title">Policy Statistics</h2>

            <div id="policy-stats-content">
                <div class="stats-loading text-center py-8">
                    <div class="uk-spinner uk-spinner-medium theme-text-muted mx-auto mb-4"></div>
                    <p class="theme-text-secondary">Loading statistics...</p>
                </div>
            </div>

            <div class="uk-modal-footer pt-6 border-t theme-border bg-theme-surface flex justify-end items-center">
                <button class="px-4 py-2.5 rounded-lg border theme-border theme-text-secondary hover:theme-text-primary hover:theme-bg-surface transition-all duration-200 uk-modal-close">Close</button>
            </div>
        </div>
    </div>

    <!-- Triage Details Modal -->
    <div id="triage-details-modal" class="uk-modal">
        <div class="uk-modal-dialog uk-modal-body theme-bg-surface rounded-lg" style="max-width: 900px; max-height: 80vh; overflow-y: auto;">
            <button class="uk-modal-close-default" type="button" uk-close></button>
            <h2 class="uk-modal-title theme-text-primary mb-6">Triage Request Details</h2>

            <div id="triage-details-content">
                <!-- Content will be populated dynamically -->
            </div>

            <div class="uk-modal-footer pt-6 border-t theme-border bg-theme-surface flex justify-between items-center">
                <div id="triage-action-feedback" class="text-sm"></div>
                <div class="flex gap-3">
                    <button class="px-4 py-2.5 rounded-lg border theme-border theme-text-secondary hover:theme-text-primary hover:theme-bg-surface transition-all duration-200 uk-modal-close">Close</button>
                    <button id="triage-reject-btn" class="px-4 py-2.5 rounded-lg theme-bg-danger hover:opacity-90 text-white font-medium transition-all duration-200">
                        <i data-lucide="x-circle" class="h-4 w-4 mr-2 inline"></i>
                        Reject
                    </button>
                    <button id="triage-approve-btn" class="px-4 py-2.5 rounded-lg theme-bg-success hover:opacity-90 text-white font-medium transition-all duration-200">
                        <i data-lucide="check-circle" class="h-4 w-4 mr-2 inline"></i>
                        Approve
                    </button>
                </div>
            </div>
        </div>
    </div>

    <style>
    .sidebar-nav-item {
        color: var(--color-text-muted);
        background: transparent;
        transition: all 0.2s ease;
        text-align: left;
        border: none;
    }

    .sidebar-nav-item:hover {
        color: var(--color-text-secondary);
        background-color: rgba(var(--color-text-muted-rgb, 173, 181, 189), 0.1);
    }

    .sidebar-nav-item.active {
        color: var(--color-primary);
        background-color: transparent;
        border: 1px solid var(--color-primary);
    }

    .tab-content {
        @apply block;
    }

    .tab-content.hidden {
        @apply hidden;
    }

    /* Autocomplete Styles */
    .autocomplete-popup {
        z-index: 1000;
    }

    .autocomplete-item {
        @apply p-3 cursor-pointer transition-colors duration-150;
    }

    .autocomplete-item:hover,
    .autocomplete-item.selected {
        background-color: var(--color-background) !important;
    }

    .autocomplete-item.already-selected {
        @apply opacity-50;
    }


    /* Selected Items Styles */
    .selected-items-list {
        @apply border theme-border rounded-lg p-3;
        min-height: 60px;
    }

    .selected-item {
        @apply flex items-center justify-between p-2 rounded-lg mb-2 last:mb-0;
        background-color: var(--color-background) !important;
    }

    .selected-item-remove {
        @apply cursor-pointer p-1 rounded;
        color: var(--color-danger) !important;
        transition: opacity 0.2s ease;
    }

    .selected-item-remove:hover {
        opacity: 0.8;
    }

    /* API Config Cards */
    .api-config-card {
        transition: all 0.2s ease;
    }

    .api-config-card:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .api-config-actions {
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .api-config-card:hover .api-config-actions {
        opacity: 1;
    }

    /* API Action Button Styles - matching documents interface */
    .api-action-btn {
        padding: 0.5rem;
        border-radius: 0.5rem;
        transition: all 0.2s ease;
        border: none;
        background: transparent;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #6b7280;
    }

    .api-action-btn:hover {
        background-color: #f3f4f6;
        color: #374151;
    }

    /* Dark mode styles */
    [data-theme="dark"] .api-action-btn {
        color: #9ca3af;
    }

    [data-theme="dark"] .api-action-btn:hover {
        background-color: #374151;
        color: #d1d5db;
    }

    /* Danger button variant */
    .api-action-btn-danger {
        color: #f87171 !important;
    }

    .api-action-btn-danger:hover {
        background-color: #fef2f2 !important;
        color: #dc2626 !important;
    }

    [data-theme="dark"] .api-action-btn-danger:hover {
        background-color: rgba(185, 28, 28, 0.2) !important;
        color: #f87171 !important;
    }

    /* Skeleton loading styles using theme variables */
    .animate-pulse .theme-border {
        background-color: var(--color-border) !important;
    }

    /* Statistics Modal Styles */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 2rem;
    }

    .stats-card {
        @apply theme-bg-surface rounded-lg p-4 theme-border border;
    }

    .stats-card-header {
        @apply flex items-center gap-3 mb-2;
    }

    .stats-card-icon {
        @apply h-5 w-5 theme-primary;
    }

    .stats-card-value {
        @apply text-2xl font-bold theme-text-primary;
    }

    .stats-user-chart {
        @apply space-y-3;
    }

    .stats-user-bar {
        @apply flex items-center gap-3;
    }

    .stats-user-bar-container {
        @apply flex-1 relative rounded-full h-6;
        background-color: var(--color-background) !important;
    }

    .stats-user-bar-fill {
        @apply h-full rounded-full;
        background-color: var(--color-primary) !important;
        transition: width 0.3s ease;
    }

    .stats-user-bar-value {
        @apply absolute right-2 top-0 text-xs font-medium theme-text-primary leading-6;
    }

    /* Override UIkit modal footer default white background */
    .uk-modal-footer {
        background-color: var(--color-surface) !important;
        border-top-color: var(--color-border) !important;
        display: flex !important;
        justify-content: flex-end !important;
        align-items: center !important;
        text-align: right !important;
        margin: 0 !important;
        padding-left: 1.5rem !important;
        padding-right: 1.5rem !important;
    }

    /* Scrollable list styling for API config cards */
    .api-config-card .hover\:theme-bg-surface:hover {
        background-color: var(--color-surface) !important;
    }

    /* Custom scrollbar for the lists */
    .api-config-card .overflow-y-auto::-webkit-scrollbar {
        width: 6px;
    }

    .api-config-card .overflow-y-auto::-webkit-scrollbar-track {
        background: transparent;
    }

    .api-config-card .overflow-y-auto::-webkit-scrollbar-thumb {
        background-color: rgba(156, 163, 175, 0.5);
        border-radius: 3px;
    }

    .api-config-card .overflow-y-auto::-webkit-scrollbar-thumb:hover {
        background-color: rgba(156, 163, 175, 0.7);
    }

    [data-theme="dark"] .api-config-card .overflow-y-auto::-webkit-scrollbar-thumb {
        background-color: rgba(75, 85, 99, 0.5);
    }

    [data-theme="dark"] .api-config-card .overflow-y-auto::-webkit-scrollbar-thumb:hover {
        background-color: rgba(75, 85, 99, 0.7);
    }

    /* Policy Cards */
    .policy-card {
        transition: all 0.2s ease;
    }

    .policy-card:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .policy-actions {
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .policy-card:hover .policy-actions {
        opacity: 1;
    }

    /* Policy Rule Builder */
    .policy-rule-item {
        @apply theme-bg-background rounded-lg p-4 relative;
    }

    .policy-rule-remove {
        @apply absolute top-2 right-2 text-red-500 hover:text-red-700 cursor-pointer;
    }

    /* Policy Status Badge */
    .policy-status-badge {
        @apply px-2 py-1 rounded-full text-xs font-medium;
    }

    .policy-status-badge.active {
        @apply bg-green-100 text-green-800;
    }

    .policy-status-badge.inactive {
        @apply bg-gray-100 text-gray-800;
    }

    [data-theme="dark"] .policy-status-badge.active {
        @apply bg-green-900 text-green-200;
    }

    [data-theme="dark"] .policy-status-badge.inactive {
        @apply bg-gray-700 text-gray-300;
    }

    /* Policy Modal Tab Styles */
    .policy-tab-btn {
        color: var(--color-text-muted);
        background: transparent;
        transition: all 0.2s ease;
        text-align: left;
        border: 1px solid transparent;
        cursor: pointer;
    }

    .policy-tab-btn:hover {
        color: var(--color-text-secondary);
        background-color: rgba(var(--color-text-muted-rgb, 173, 181, 189), 0.1);
    }

    .policy-tab-btn.active {
        color: var(--color-primary);
        background-color: rgba(var(--color-primary-rgb), 0.1);
        border: 1px solid var(--color-primary);
    }

    .policy-tab-btn:focus {
        outline: none;
        box-shadow: 0 0 0 2px rgba(var(--color-primary-rgb), 0.2);
    }

    /* Improved Rule Item Styles */
    .policy-rule-card {
        @apply theme-bg-surface rounded-lg p-4 relative transition-all duration-200;
        border: 2px solid var(--color-border);
    }

    .policy-rule-card:hover {
        border-color: var(--color-primary);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .policy-rule-card.invalid {
        border-color: var(--color-danger) !important;
        background-color: rgba(var(--color-danger-rgb), 0.05) !important;
    }

    /* Rule Template Button Active State */
    .rule-template-btn.active {
        background-color: var(--color-primary) !important;
        color: white !important;
        border-color: var(--color-primary) !important;
    }

    /* Validation Messages */
    .validation-error {
        color: var(--color-danger);
        font-size: 0.875rem;
        margin-top: 0.25rem;
    }

    .validation-success {
        color: var(--color-success);
        font-size: 0.875rem;
        margin-top: 0.25rem;
    }

    /* Enhanced Policy Card Styles */
    .policy-card {
        position: relative;
        overflow: hidden;
    }

    /* Rule Display Styles */
    .rule-item {
        position: relative;
        padding-left: 20px;
    }

    .rule-item::before {
        content: '';
        position: absolute;
        left: 8px;
        top: 50%;
        transform: translateY(-50%);
        width: 4px;
        height: 4px;
        border-radius: 50%;
        background: var(--color-primary);
    }

    /* API Attachment Styles */
    .api-attachment-item {
        /* No hover effects */
    }

    /* Statistics Grid */
    .stats-mini-card {
        position: relative;
        overflow: hidden;
    }

    /* Enhanced Status Badges */
    .policy-status-badge {
        position: relative;
        padding-left: 20px;
    }

    .policy-status-badge::before {
        content: '';
        position: absolute;
        left: 8px;
        top: 50%;
        transform: translateY(-50%);
        width: 6px;
        height: 6px;
        border-radius: 50%;
    }

    .policy-status-badge.active::before {
        background: #10b981;
    }

    .policy-status-badge.inactive::before {
        background: #6b7280;
    }

    /* Dark mode adjustments for enforcement mode badges */
    [data-theme="dark"] .bg-red-100 {
        background-color: rgba(220, 38, 38, 0.2) !important;
    }

    [data-theme="dark"] .bg-blue-100 {
        background-color: rgba(59, 130, 246, 0.2) !important;
    }

    /* Triage Section Styles */
    .triage-filter-btn {
        color: var(--color-text-muted);
        background: transparent;
        border: 1px solid var(--color-border);
    }

    .triage-filter-btn:hover {
        color: var(--color-text-primary);
        background-color: var(--color-surface);
    }

    .triage-filter-btn.active {
        color: var(--color-primary);
        background-color: rgba(var(--color-primary-rgb), 0.1);
        border-color: var(--color-primary);
    }

    /* Triage Card Styles */
    .triage-card {
        transition: all 0.2s ease;
    }

    .triage-card:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    /* Triage Status Badges */
    .triage-status-pending {
        background-color: rgba(var(--color-warning-rgb, 255, 193, 7), 0.1);
        color: var(--color-warning);
    }

    .triage-status-approved {
        background-color: rgba(var(--color-success-rgb, 40, 167, 69), 0.1);
        color: var(--color-success);
    }

    .triage-status-rejected {
        background-color: rgba(var(--color-danger-rgb, 220, 53, 69), 0.1);
        color: var(--color-danger);
    }

    /* Triage Details Styles */
    .triage-detail-section {
        @apply theme-bg-background rounded-lg p-4 mb-4;
    }

    .triage-code-block {
        @apply theme-bg-surface rounded-lg p-4 overflow-x-auto;
        font-family: 'Courier New', monospace;
        font-size: 0.875rem;
        line-height: 1.5;
    }

    /* Theme-aware colors for triage buttons */
    .theme-bg-success {
        background-color: var(--color-success) !important;
    }

    .theme-bg-danger {
        background-color: var(--color-danger) !important;
    }

    .theme-bg-warning {
        background-color: var(--color-warning) !important;
    }

    /* Triage pending badge animation */
    #triage-pending-badge {
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0% {
            opacity: 1;
        }
        50% {
            opacity: 0.6;
        }
        100% {
            opacity: 1;
        }
    }
    </style>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();
    </script>
